(function(){"use strict";var e={4552:function(e,t,a){var s=a(3751),n=a(641);const l={id:"app"};function o(e,t,a,s,o,i){const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(r)])}var i={name:"App"},r=a(6262);const d=(0,r.A)(i,[["render",o]]);var c=d,m=a(5220);const u={key:0,class:"welcome"},p={class:"welcome-container"},h={class:"button-container"};function b(e,t){const a=(0,n.g2)("router-view"),s=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(a),"/"===e.$route.path?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",p,[t[1]||(t[1]=(0,n.Lk)("h1",null,"Welcome to CTC CMS",-1)),t[2]||(t[2]=(0,n.Lk)("p",null,"Please log in to continue.",-1)),(0,n.Lk)("div",h,[(0,n.bF)(s,{to:"/login"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.Lk)("button",{class:"login-btn"},"Login",-1)]))),_:1})])])])):(0,n.Q3)("",!0)],64)}const f={},k=(0,r.A)(f,[["render",b],["__scopeId","data-v-6b31b6c1"]]);var v=k;const g={class:"login-B"},L={key:0,class:"loading-screen"},y={class:"container"},_={class:"screen"},w={class:"screen__content"},S={class:"login__field"},A={class:"login__field"};function N(e,t,a,l,o,i){const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(r),(0,n.Lk)("div",g,[o.loading?((0,n.uX)(),(0,n.CE)("div",L,t[3]||(t[3]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),(0,n.Lk)("div",y,[(0,n.Lk)("div",_,[(0,n.Lk)("div",w,[(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.login&&i.login(...e)),["prevent"])),class:"login"},[(0,n.Lk)("div",S,[t[4]||(t[4]=(0,n.Lk)("i",{class:"login__icon fas fa-user"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),class:"login__input",placeholder:"User name / Email",required:""},null,512),[[s.Jo,o.email]])]),(0,n.Lk)("div",A,[t[5]||(t[5]=(0,n.Lk)("i",{class:"login__icon fas fa-lock"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),class:"login__input",placeholder:"Password",required:""},null,512),[[s.Jo,o.password]])]),t[6]||(t[6]=(0,n.Lk)("button",{type:"submit",class:"button login__submit"},[(0,n.Lk)("span",{class:"button__text"},"Log In Now"),(0,n.Lk)("i",{class:"button__icon fas fa-chevron-right"})],-1))],32),t[7]||(t[7]=(0,n.Fv)('<div class="social-login" data-v-c2819fca><h3 data-v-c2819fca>log in via</h3><div class="social-icons" data-v-c2819fca><a href="#" class="social-login__icon fab fa-instagram" data-v-c2819fca></a><a href="#" class="social-login__icon fab fa-facebook" data-v-c2819fca></a><a href="#" class="social-login__icon fab fa-twitter" data-v-c2819fca></a></div></div>',1))]),t[8]||(t[8]=(0,n.Fv)('<div class="screen__background" data-v-c2819fca><span class="screen__background__shape screen__background__shape4" data-v-c2819fca></span><span class="screen__background__shape screen__background__shape3" data-v-c2819fca></span><span class="screen__background__shape screen__background__shape2" data-v-c2819fca></span><span class="screen__background__shape screen__background__shape1" data-v-c2819fca></span></div>',1))])])])],64)}a(4114);var C=a(4335),E={name:"LoginPage",data(){return{loading:!1,email:"",password:""}},methods:{async login(){console.info(this.email),console.info(this.password),this.loading=!0;try{const e=await C.A.post("https://churchmsbackend.onrender.com/auth/login",{email:this.email,password:this.password});console.info(e.data),"User login successful"===e.data.message?(localStorage.setItem("isAuthenticated","True"),localStorage.setItem("userRole",e.data.data.role),"ADMIN"===e.data.data.role?this.$router.push("/adminOverView"):this.$router.push("/home")):alert("Invalid credentials")}catch(e){console.error("Login error:",e),alert("An error occurred during login. Please try again.")}finally{this.loading=!1}}}};const x=(0,r.A)(E,[["render",N],["__scopeId","data-v-c2819fca"]]);var U=x;function I(e,t,a,s,l,o){const i=(0,n.g2)("Navbar"),r=(0,n.g2)("Sidebar"),d=(0,n.g2)("router-view"),c=(0,n.g2)("overView");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i),(0,n.bF)(r),(0,n.bF)(d),(0,n.bF)(c)])}var M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd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";const D={class:"navbar"},P={class:"navbar_content"};function V(e,t,a,s,l,o){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t[5]||(t[5]=(0,n.Lk)("head",null,[(0,n.Lk)("meta",{charset:"utf-8"}),(0,n.Lk)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.Lk)("link",{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet"})],-1)),(0,n.Lk)("body",null,[(0,n.Lk)("nav",D,[t[4]||(t[4]=(0,n.Fv)('<div class="logo_item"><i class="bx bx-menu" id="sidebarOpen"></i><img src="'+M+'" alt=""><i>CTC CMS</i></div><div class="search_bar"><input type="text" placeholder="Search"></div>',2)),(0,n.Lk)("div",P,[t[1]||(t[1]=(0,n.Lk)("i",{class:"bi bi-grid"},null,-1)),t[2]||(t[2]=(0,n.Lk)("i",{class:"bx bx-sun",id:"darkLight"},null,-1)),t[3]||(t[3]=(0,n.Lk)("i",{class:"bx bx-bell"},null,-1)),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e))},"Logout")])])])],64)}var F={methods:{logout(){localStorage.clear(),window.location.href="/login"}},mounted(){document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#darkLight");e?e.addEventListener("click",(()=>{document.body.classList.toggle("dark"),document.body.classList.contains("dark")?e.classList.replace("bx-sun","bx-moon"):e.classList.replace("bx-moon","bx-sun")})):console.error("Dark mode toggle icon (darkLight) not found")}))}};const B=(0,r.A)(F,[["render",V]]);var R=B;const T={class:"sidebar"},X={class:"menu_content"},O={class:"menu_items"},J={class:"item"},G={class:"item"},K={class:"menu_items submenu"},Q={class:"item"},W={class:"menu_items submenu"},Z={class:"item"},z={class:"menu_items submenu"};function Y(e,t,a,s,l,o){const i=(0,n.g2)("router-view"),r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i),(0,n.Lk)("nav",T,[(0,n.Lk)("div",X,[(0,n.Lk)("ul",O,[t[11]||(t[11]=(0,n.Lk)("div",{class:"menu_title menu_dahsboard"},null,-1)),(0,n.Lk)("li",J,[(0,n.bF)(r,{to:"/adminOverView",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.Lk)("span",{class:"navlink_icon"},[(0,n.Lk)("i",{class:"bx bx-grid-alt"})],-1),(0,n.Lk)("span",{class:"navlink"},"Overview",-1)]))),_:1})]),(0,n.Lk)("li",G,[(0,n.bF)(r,{to:"",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.Lk)("span",{class:"navlink_icon"},[(0,n.Lk)("i",{class:"bx bx-user"})],-1),(0,n.Lk)("span",{class:"navlink"},"Users",-1),(0,n.Lk)("i",{class:"bx bx-chevron-right arrow-left"},null,-1)]))),_:1}),(0,n.Lk)("ul",K,[(0,n.bF)(r,{to:"/register",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.Lk)("i",{class:"bx bx-user-plus"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Add Users",-1)]))),_:1}),(0,n.bF)(r,{to:"/editUser",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.Lk)("i",{class:"bx bxs-user-detail"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Edit Users",-1)]))),_:1})])]),(0,n.Lk)("li",Q,[t[6]||(t[6]=(0,n.Fv)('<div href="#" class="nav_link submenu_item"><span class="navlink_icon"><i class="bx bx-check-circle"></i></span><span class="navlink">Attendance</span><i class="bx bx-chevron-right arrow-left"></i></div>',1)),(0,n.Lk)("ul",W,[(0,n.bF)(r,{to:"/attendance",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.Lk)("i",{class:"bx bx-task"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"}," Take Attendance",-1)]))),_:1}),(0,n.bF)(r,{to:"/attendanceOverview",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.Lk)("i",{class:"bx bx-grid-small"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Overview",-1)]))),_:1})])]),(0,n.Lk)("li",Z,[(0,n.bF)(r,{to:"",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.Lk)("span",{class:"navlink_icon"},[(0,n.Lk)("i",{class:"bx bx-group"})],-1),(0,n.Lk)("span",{class:"navlink"},"Members",-1),(0,n.Lk)("i",{class:"bx bx-chevron-right arrow-left"},null,-1)]))),_:1}),(0,n.Lk)("ul",z,[(0,n.bF)(r,{to:"/members",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.Lk)("i",{class:"bx bx-user-plus"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Add members",-1)]))),_:1}),(0,n.bF)(r,{to:"/editMemberPage",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.Lk)("i",{class:"bx bxs-user-detail"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Edit members",-1)]))),_:1}),(0,n.bF)(r,{to:"",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Members actions",-1)]))),_:1})])]),t[12]||(t[12]=(0,n.Fv)('<li class="item"><div href="#" class="nav_link submenu_item"><span class="navlink_icon"><i class="bx bx-file"></i></span><span class="navlink">Reports</span><i class="bx bx-chevron-right arrow-left"></i></div><ul class="menu_items submenu"><a href="#" class="nav_link sublink">Nav Sub Link</a><a href="#" class="nav_link sublink">Nav Sub Link</a><a href="#" class="nav_link sublink">Nav Sub Link</a><a href="#" class="nav_link sublink">Nav Sub Link</a></ul></li>',1))]),t[13]||(t[13]=(0,n.Fv)('<div class="bottom_content"><div class="bottom expand_sidebar"><span> Expand</span><i class="bx bx-log-in"></i></div><div class="bottom collapse_sidebar"><span> Collapse</span><i class="bx bx-log-out"></i></div></div>',1))])])],64)}var H={mounted(){const e=document.querySelector(".sidebar"),t=document.querySelectorAll(".submenu_item"),a=document.querySelector("#sidebarOpen"),s=document.querySelector(".collapse_sidebar"),n=document.querySelector(".expand_sidebar");a.addEventListener("click",(()=>e.classList.toggle("close"))),s.addEventListener("click",(()=>{e.classList.add("close","hoverable")})),n.addEventListener("click",(()=>{e.classList.remove("close","hoverable")})),e.addEventListener("mouseenter",(()=>{e.classList.contains("hoverable")&&e.classList.remove("close")})),e.addEventListener("mouseleave",(()=>{e.classList.contains("hoverable")&&e.classList.add("close")})),t.forEach(((e,a)=>{e.addEventListener("click",(()=>{e.classList.toggle("show_submenu"),t.forEach(((e,t)=>{a!==t&&e.classList.remove("show_submenu")}))}))}))}};const j=(0,r.A)(H,[["render",Y]]);var q=j,$=a(33);const ee={class:"attendance-page"},te={key:0,class:"loading-screen"},ae={class:"main-content"},se={class:"section1"},ne={class:"total_Users"},le={class:"total_Dataclerk"},oe={class:"total_Accounts"},ie={class:"total_Administrators"},re={class:"total_DepartmentalLeaders"},de={class:"total_Admin"},ce={class:"total_attendance"},me={class:"total_present"},ue={class:"total_absent"},pe={class:"total_members"};function he(e,t,a,s,l,o){const i=(0,n.g2)("AdminSidebar"),r=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",ee,[l.loading?((0,n.uX)(),(0,n.CE)("div",te,t[0]||(t[0]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),(0,n.bF)(i),(0,n.Lk)("div",ae,[(0,n.bF)(r),(0,n.Lk)("section",se,[(0,n.Lk)("div",ne,[t[1]||(t[1]=(0,n.Lk)("p",null,"Users",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalUsers),1)]),(0,n.Lk)("div",le,[t[2]||(t[2]=(0,n.Lk)("p",null,"DATA CLERK",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalDataclerk),1)]),(0,n.Lk)("div",oe,[t[3]||(t[3]=(0,n.Lk)("p",null,"ACCOUNTS",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAccounts),1)]),(0,n.Lk)("div",ie,[t[4]||(t[4]=(0,n.Lk)("p",null,"ADMINISTRATOR",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAdministrators),1)]),(0,n.Lk)("div",re,[t[5]||(t[5]=(0,n.Lk)("p",null,"DEPARTMENTAL LEADERS",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalDepartmentalLeaders),1)]),(0,n.Lk)("div",de,[t[6]||(t[6]=(0,n.Lk)("p",null,"ADMIN",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAdmin),1)])]),(0,n.Lk)("div",ce,[t[7]||(t[7]=(0,n.Lk)("p",null,"Total Attendance ",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAttendance),1)]),(0,n.Lk)("div",me,[t[8]||(t[8]=(0,n.Lk)("p",null,"Present",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalPresent),1)]),(0,n.Lk)("div",ue,[t[9]||(t[9]=(0,n.Lk)("p",null,"Absent",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAbsent),1)]),(0,n.Lk)("div",pe,[t[10]||(t[10]=(0,n.Lk)("p",null,"Total Members ",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalMembers),1)])])])}var be={components:{AdminSidebar:q,Navbar:R},data(){return{loading:!1,totalAttendance:0,totalPresent:0,totalAbsent:0,totalUsers:0,totalDataclerk:0,totalAccounts:0,totalAdministrators:0,totalDepartmentalLeaders:0,totalAdmin:0,totalMembers:0}},methods:{async fetchAttendanceSummaryData(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_attendance_for_the_current_day");this.totalAttendance=e.data.total_attendance,this.totalPresent=e.data.present_attendance,this.totalAbsent=e.data.absent_attendance}catch(e){console.error("Error fetching Attendance summary data:",e)}},async fetchUsersSummaryData(){try{const e=await C.A.get("https://churchmsbackend.onrender.com/auth/get_user_count");this.totalUsers=e.data.total_users,this.totalDataclerk=e.data.data_clerk,this.totalAccounts=e.data.accounts,this.totalAdministrators=e.data.administrator,this.totalDepartmentalLeaders=e.data.departmentLeaders,this.totalAdmin=e.data.admin}catch(e){console.error("Error fetching user summary data:",e)}},async fetchMembersSummaryData(){try{const e=await C.A.get("https://churchmsbackend.onrender.com/members/get_total_number_of_members");this.totalMembers=e.data.total_members}catch(e){console.error("Error fetching Member summary data:",e)}finally{this.loading=!1}}},mounted(){this.fetchAttendanceSummaryData(),this.fetchUsersSummaryData(),this.fetchMembersSummaryData(),window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const fe=(0,r.A)(be,[["render",he],["__scopeId","data-v-f6a8864c"]]);var ke=fe,ve={components:{Navbar:R,Sidebar:q,overView:ke},mounted(){window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const ge=(0,r.A)(ve,[["render",I],["__scopeId","data-v-a1ebee8a"]]);var Le=ge;const ye={class:"attendance-page"},_e={key:0,class:"loading-screen"},we={class:"main-content"},Se={key:0,class:"first_info"},Ae={key:0,class:"error"},Ne=["value"],Ce={key:1,class:""},Ee={for:"privilege1"},xe={for:"privilege2"},Ue={for:"privilege3"},Ie={for:"privilege4"},Me={for:"privilege5"},De={key:2},Pe={class:"progress-bar"};function Ve(e,t,a,l,o,i){const r=(0,n.g2)("Sidebar"),d=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",ye,[o.loading?((0,n.uX)(),(0,n.CE)("div",_e,t[16]||(t[16]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),(0,n.bF)(r),(0,n.Lk)("div",we,[(0,n.bF)(d),t[34]||(t[34]=(0,n.Lk)("h1",null,"User Registration",-1)),(0,n.Lk)("form",{onSubmit:t[15]||(t[15]=(0,s.D$)(((...e)=>i.register&&i.register(...e)),["prevent"])),class:"registration-form"},[1===o.step?((0,n.uX)(),(0,n.CE)("div",Se,[t[18]||(t[18]=(0,n.Lk)("h2",{class:"step1_first_h2"}," User Registeration",-1)),t[19]||(t[19]=(0,n.Lk)("label",{class:"label_fn",for:"firstName"},"First Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"fn",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.firstname=e),id:"firstName",placeholder:"First Name",required:""},null,512),[[s.Jo,o.form.firstname]]),t[20]||(t[20]=(0,n.Lk)("label",{class:"label_ln",for:"lastName"},"Last Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ln",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.lastname=e),id:"lastName",placeholder:"Last Name",required:""},null,512),[[s.Jo,o.form.lastname]]),t[21]||(t[21]=(0,n.Lk)("label",{class:"label_ea",for:"email"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ea",type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>o.form.email=e),id:"email",placeholder:"Email",required:""},null,512),[[s.Jo,o.form.email]]),t[22]||(t[22]=(0,n.Lk)("label",{class:"label_pn",for:"phoneNumber"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{class:"pn",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.form.phoneNumber=e),id:"phoneNumber",placeholder:"Phone Number",required:""},null,512),[[s.Jo,o.form.phoneNumber]]),t[23]||(t[23]=(0,n.Lk)("label",{class:"label_pw",for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{class:"pw",type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>o.form.password=e),id:"password",placeholder:"Password",required:""},null,512),[[s.Jo,o.form.password]]),t[24]||(t[24]=(0,n.Lk)("label",{class:"label_cpw",for:"confirmPassword"},"Confirm password",-1)),(0,n.bo)((0,n.Lk)("input",{class:"cpw",type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>o.form.confirmPassword=e),id:"confirmPassword",placeholder:"Confirm password",required:""},null,512),[[s.Jo,o.form.confirmPassword]]),i.passwordMismatch?((0,n.uX)(),(0,n.CE)("p",Ae,"Passwords do not match")):(0,n.Q3)("",!0),t[25]||(t[25]=(0,n.Lk)("label",{class:"label_role",for:"role"},"Role",-1)),(0,n.bo)((0,n.Lk)("select",{class:"role","onUpdate:modelValue":t[6]||(t[6]=e=>o.form.role=e),id:"role",required:""},[t[17]||(t[17]=(0,n.Lk)("option",{disabled:"",value:""},"Select Role ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.roles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Ne)))),128))],512),[[s.u1,o.form.role]]),(0,n.Lk)("button",{class:"s2nextBut",type:"button",onClick:t[7]||(t[7]=(...e)=>i.nextStep&&i.nextStep(...e))},"Next")])):(0,n.Q3)("",!0),2===o.step?((0,n.uX)(),(0,n.CE)("div",Ce,[t[31]||(t[31]=(0,n.Lk)("h2",{class:"step2_first_h2"}," Privileges",-1)),t[32]||(t[32]=(0,n.Lk)("label",{class:"label_heading"},"Users Privileges",-1)),(0,n.Lk)("label",Ee,[(0,n.bo)((0,n.Lk)("input",{class:"privilege1",type:"checkbox",id:"privilege1",value:"Add members","onUpdate:modelValue":t[8]||(t[8]=e=>o.form.privileges=e)},null,512),[[s.lH,o.form.privileges]]),t[26]||(t[26]=(0,n.Lk)("span",{class:"privilege1-text"},"Add members",-1))]),(0,n.Lk)("label",xe,[(0,n.bo)((0,n.Lk)("input",{class:"privilege2",type:"checkbox",id:"privilege2",value:"Take Attendance","onUpdate:modelValue":t[9]||(t[9]=e=>o.form.privileges=e)},null,512),[[s.lH,o.form.privileges]]),t[27]||(t[27]=(0,n.Lk)("span",{class:"privilege2-text"},"Take Attendance",-1))]),(0,n.Lk)("label",Ue,[(0,n.bo)((0,n.Lk)("input",{class:"privilege3",type:"checkbox",id:"privilege3",value:"Create Users","onUpdate:modelValue":t[10]||(t[10]=e=>o.form.privileges=e)},null,512),[[s.lH,o.form.privileges]]),t[28]||(t[28]=(0,n.Lk)("span",{class:"privilege3-text"},"Create Users",-1))]),(0,n.Lk)("label",Ie,[(0,n.bo)((0,n.Lk)("input",{class:"privilege4",type:"checkbox",id:"privilege4",value:"Get Attandance Overview","onUpdate:modelValue":t[11]||(t[11]=e=>o.form.privileges=e)},null,512),[[s.lH,o.form.privileges]]),t[29]||(t[29]=(0,n.Lk)("span",{class:"privilege4-text"},"Get Attandance Overview",-1))]),(0,n.Lk)("label",Me,[(0,n.bo)((0,n.Lk)("input",{class:"privilege5",type:"checkbox",id:"privilege5",value:"Get Member Details","onUpdate:modelValue":t[12]||(t[12]=e=>o.form.privileges=e)},null,512),[[s.lH,o.form.privileges]]),t[30]||(t[30]=(0,n.Lk)("span",{class:"privilege5-text"},"Get Member Details",-1))]),(0,n.Lk)("button",{class:"s2preveBut",type:"button",onClick:t[13]||(t[13]=(...e)=>i.prevStep&&i.prevStep(...e))},"Previous"),(0,n.Lk)("button",{class:"s2submitBut",type:"button",onClick:t[14]||(t[14]=(...e)=>i.register&&i.register(...e))},"Submit")])):(0,n.Q3)("",!0),3===o.step?((0,n.uX)(),(0,n.CE)("div",De,t[33]||(t[33]=[(0,n.Lk)("label",{class:"label_heading_final"},"Users registration complete",-1)]))):(0,n.Q3)("",!0)],32),(0,n.Lk)("div",Pe,[(0,n.Lk)("div",{style:(0,$.Tr)({width:53*(o.step-1)+"%"}),class:"progress"},null,4)])])])}var Fe={components:{Sidebar:R,Navbar:q},name:"RegisterationPage",data(){return{loading:!1,step:1,roles:["ADMIN","DATA CLERK","ADMINISTRATOR"],form:{firstname:"",lastname:"",email:"",phoneNumber:"",password:"",confirmPassword:"",role:"",privileges:[]}}},computed:{passwordMismatch(){return this.form.password&&this.form.confirmPassword&&this.form.password!==this.form.confirmPassword}},methods:{isFormValid(){return this.form.firstname&&this.form.lastname&&this.form.email&&this.form.phoneNumber&&this.form.password&&this.form.confirmPassword&&this.form.role&&this.form.privileges},nextStep(){this.step<3&&this.step++},prevStep(){this.step>1&&this.step--},async register(){if(this.loading=!0,this.isFormValid){console.info("in the registeration function");const t={firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,phoneNumber:this.form.phoneNumber,password:this.form.password,role:this.form.role,privileges:this.form.privileges};console.log("Form is valid. Proceeding with registration...",t);try{const e=await C.A.post("hhttps://churchmsbackend.onrender.com/auth/create_user",{firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,phoneNumber:this.form.phoneNumber,password:this.form.password,role:this.form.role,privileges:this.form.privileges});console.info(e),"User registeration successfully"===e.data.message?this.step=3:(console.info("error response for registeration ",e),alert("User registeration failed"))}catch(e){console.error("Registeration error:",e),alert("An error occurred during registeration. Please try again.")}finally{this.loading=!1,window.location.reload()}}else console.log("Form is invalid"),alert("Form is invalid. Please try again.")}},mounted(){window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const Be=(0,r.A)(Fe,[["render",Ve]]);var Re=Be;const Te={class:"attendance-page"},Xe={key:0,class:"loading-screen"},Oe={class:"main-content"},Je={class:"left_view"},Ge={class:"table-container"},Ke=["onClick"],Qe=["onClick"],We={class:"modal-card"},Ze=["value"];function ze(e,t,a,l,o,i){const r=(0,n.g2)("Sidebar"),d=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",Te,[o.loading?((0,n.uX)(),(0,n.CE)("div",Xe,t[15]||(t[15]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),(0,n.bF)(r),(0,n.Lk)("div",Oe,[(0,n.bF)(d),t[31]||(t[31]=(0,n.Lk)("h1",null,"Edit Users",-1)),(0,n.Lk)("section",Je,[(0,n.Lk)("button",{class:"button4",onClick:t[0]||(t[0]=(...e)=>i.getUsers&&i.getUsers(...e))},"Get Users")]),(0,n.Lk)("div",Ge,[(0,n.Lk)("table",null,[t[16]||(t[16]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Email"),(0,n.Lk)("th",null,"Role"),(0,n.Lk)("th",null,"Actions")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.usersList,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,$.v_)(e.name),1),(0,n.Lk)("td",null,(0,$.v_)(e.email),1),(0,n.Lk)("td",null,(0,$.v_)(e.role),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"edit",onClick:t=>i.editUser(e)},"Edit",8,Ke),(0,n.Lk)("button",{class:"delete",onClick:t=>i.deleteUser(e)},"Delete",8,Qe)])])))),128))])])]),o.showEditModal?((0,n.uX)(),(0,n.CE)("div",{key:0,onSubmit:t[14]||(t[14]=(0,s.D$)(((...e)=>i.updateUserDetails&&i.updateUserDetails(...e)),["prevent"])),class:"modal-overlay"},[(0,n.Lk)("div",We,[t[23]||(t[23]=(0,n.Lk)("h2",null,"Update User ",-1)),t[24]||(t[24]=(0,n.Lk)("label",{class:"firstN"},"First Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"firstN-input","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.firstname=e),type:"text"},null,512),[[s.Jo,o.form.firstname]]),t[25]||(t[25]=(0,n.Lk)("label",{class:"lastN"},"Last Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"lastN-input","onUpdate:modelValue":t[2]||(t[2]=e=>o.form.lastname=e),type:"text"},null,512),[[s.Jo,o.form.lastname]]),t[26]||(t[26]=(0,n.Lk)("label",{class:"emailL"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{class:"email-input","onUpdate:modelValue":t[3]||(t[3]=e=>o.form.email=e),type:"email"},null,512),[[s.Jo,o.form.email]]),t[27]||(t[27]=(0,n.Lk)("label",{class:"phoneN"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{class:"phoneN-input","onUpdate:modelValue":t[4]||(t[4]=e=>o.form.phoneNumber=e),type:"text"},null,512),[[s.Jo,o.form.phoneNumber]]),t[28]||(t[28]=(0,n.Lk)("label",{class:"passwordL"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{class:"passwordL-input","onUpdate:modelValue":t[5]||(t[5]=e=>o.form.password=e),type:"password"},null,512),[[s.Jo,o.form.password]]),t[29]||(t[29]=(0,n.Lk)("label",{class:"roleL"},"Role",-1)),(0,n.bo)((0,n.Lk)("select",{class:"roleL-input","onUpdate:modelValue":t[6]||(t[6]=e=>o.form.role=e)},[t[17]||(t[17]=(0,n.Lk)("option",{disabled:"",value:""},"Select Role",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.roles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Ze)))),128))],512),[[s.u1,o.form.role]]),t[30]||(t[30]=(0,n.Lk)("label",{class:"privi"},"Privileges",-1)),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi1",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>o.form.privileges=e),value:"Add members"},null,512),[[s.lH,o.form.privileges]]),t[18]||(t[18]=(0,n.Lk)("span",{class:"privi1-text"},"Add Members",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi2",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>o.form.privileges=e),value:"Take Attendance"},null,512),[[s.lH,o.form.privileges]]),t[19]||(t[19]=(0,n.Lk)("span",{class:"privi2-text"},"Take Attendance",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi3",type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>o.form.privileges=e),value:"Create Users"},null,512),[[s.lH,o.form.privileges]]),t[20]||(t[20]=(0,n.Lk)("span",{class:"privi3-text"},"Create Users",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi4",type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>o.form.privileges=e),value:"Get Attendance Overview"},null,512),[[s.lH,o.form.privileges]]),t[21]||(t[21]=(0,n.Lk)("span",{class:"privi4-text"},"Get Attendance Overview",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi5",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>o.form.privileges=e),value:"Get Member Details"},null,512),[[s.lH,o.form.privileges]]),t[22]||(t[22]=(0,n.Lk)("span",{class:"privi5-text"},"Get Member Details",-1))])]),(0,n.Lk)("button",{class:"updateb",onClick:t[12]||(t[12]=(...e)=>i.updateUserDetails&&i.updateUserDetails(...e))},"Save Changes"),(0,n.Lk)("button",{class:"cancelb",onClick:t[13]||(t[13]=e=>o.showEditModal=!1)},"Cancel")])],32)):(0,n.Q3)("",!0)])])}var Ye={components:{Sidebar:R,Navbar:q},data(){return{loading:!1,showEditModal:!1,user_id:"",usersList:[],roles:["ADMIN","DATA CLERK","ADMINISTRATOR"],form:{firstname:"",lastname:"",email:"",phoneNumber:"",password:"",confirmPassword:"",role:"",privileges:[]}}},methods:{async fetchSummaryData(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_attendance_for_the_current_day");this.totalAttendance=e.data.total_attendance,this.totalPresent=e.data.present_attendance,this.totalAbsent=e.data.absent_attendance}catch(e){console.error("Error fetching summary data:",e)}finally{this.loading=!1}},async getUsers(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/auth/get_all_users");console.info("user list",e.data),"No user data exists"!==e.data?this.usersList=e.data.map((e=>({name:e.firstname+" "+e.lastname,email:e.email,role:e.role,user_id:e.id}))):(this.attendanceList=e.data,this.usersList=[])}catch(e){console.error("Error fetching user list:",e)}finally{this.loading=!1}},async editUser(e){this.loading=!0,console.error("getting details to update");try{const t=await C.A.get(`https://churchmsbackend.onrender.com/auth/get_user_by_id/${e.user_id}`);if(console.info("user data",t.data),t.data){const e=t.data;this.form={firstname:e.firstname||"",lastname:e.lastname||"",email:e.email||"",phoneNumber:e.phoneNumber||"",password:e.password||"",role:e.role||"",privileges:e.privileges?e.privileges.split(","):[]},this.maskedPassword="*****",this.user_id=e.id,this.showEditModal=!0}else alert("Error getting user data")}catch(t){console.error("Error fetching user data:",t)}finally{this.loading=!1}},isFormValid(){return this.form.firstname&&this.form.lastname&&this.form.email&&this.form.phoneNumber&&this.form.password&&this.form.confirmPassword&&this.form.role&&this.form.privileges},async updateUserDetails(){if(this.loading=!0,this.isFormValid){console.info("in the registeration function");const t={firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,phoneNumber:this.form.phoneNumber,password:this.form.password,role:this.form.role,privileges:this.form.privileges};console.log("Form is valid. Proceeding with user update...",t);try{const e=await C.A.patch(`https://churchmsbackend.onrender.com/auth/update_individual_user_fields/${this.user_id}`,{firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,phoneNumber:this.form.phoneNumber,password:this.form.password,role:this.form.role,privileges:this.form.privileges});console.info(e),e.data?(alert("User updated successfully"),this.showEditModal=!0):(console.info("error response for registeration ",e),alert("User details update failed"))}catch(e){console.error("Registeration error:",e),alert("An error occurred during registeration. Please try again.")}finally{this.loading=!1}}else console.log("Form is invalid"),alert("Form is invalid. Please try again.")},async deleteUser(e){this.loading=!0,console.info("this is the current record: ",e);try{console.info("user_id: ",e.user_id);const t=window.confirm(`Are you sure you want to delete the user with the name "${e.email}"?`);if(t){const t=await C.A.delete(`https://churchmsbackend.onrender.com/auth/delete_user_by_id/${e.user_id}`);console.info(" delete response ",t),"User not found"!==t.data?(this.usersList=this.usersList.filter((t=>t.user_id!==e.user_id)),alert("User deleted successfully.")):alert("User with name {} not found.")}else console.info("User deletion cancelled.")}catch(t){console.error("Error deleting user",t)}finally{this.loading=!1}}},mounted(){this.fetchSummaryData(),window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const He=(0,r.A)(Ye,[["render",ze],["__scopeId","data-v-1ea21763"]]);var je=He;function qe(e,t,a,s,l,o){const i=(0,n.g2)("Navbar"),r=(0,n.g2)("Sidebar"),d=(0,n.g2)("router-view"),c=(0,n.g2)("ImageSlider");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i),(0,n.bF)(r),(0,n.bF)(d),(0,n.bF)(c)])}const $e={class:"sidebar"},et={class:"menu_content"},tt={class:"menu_items"},at={class:"item"},st={class:"menu_items submenu"},nt={class:"item"},lt={class:"menu_items submenu"};function ot(e,t,a,s,l,o){const i=(0,n.g2)("router-view"),r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i),(0,n.Lk)("nav",$e,[(0,n.Lk)("div",et,[(0,n.Lk)("ul",tt,[t[6]||(t[6]=(0,n.Fv)('<div class="menu_title menu_dahsboard"></div><li class="item"><div href="#" class="nav_link submenu_item"><span class="navlink_icon"><i class="bx bx-grid-alt"></i></span><span class="navlink">Overview</span></div></li>',2)),(0,n.Lk)("li",at,[t[2]||(t[2]=(0,n.Fv)('<div href="#" class="nav_link submenu_item"><span class="navlink_icon"><i class="bx bx-check-circle"></i></span><span class="navlink">Attendance</span><i class="bx bx-chevron-right arrow-left"></i></div>',1)),(0,n.Lk)("ul",st,[(0,n.bF)(r,{to:"/attendance",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.Lk)("i",{class:"bx bx-task"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"}," Take Attendance",-1)]))),_:1}),(0,n.bF)(r,{to:"/attendanceOverview",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.Lk)("i",{class:"bx bx-grid-small"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"overview",-1)]))),_:1})])]),(0,n.Lk)("li",nt,[(0,n.bF)(r,{to:"",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.Lk)("span",{class:"navlink_icon"},[(0,n.Lk)("i",{class:"bx bx-group"})],-1),(0,n.Lk)("span",{class:"navlink"},"Members",-1),(0,n.Lk)("i",{class:"bx bx-chevron-right arrow-left"},null,-1)]))),_:1}),(0,n.Lk)("ul",lt,[(0,n.bF)(r,{to:"/members",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.Lk)("i",{class:"bx bx-user-plus"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Add members",-1)]))),_:1}),(0,n.bF)(r,{to:"/editMemberPage",class:"nav_link submenu_item"},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.Lk)("i",{class:"bx bxs-user-detail"},null,-1),(0,n.Lk)("a",{href:"#",class:"nav_link sublink"},"Edit members",-1)]))),_:1})])]),t[7]||(t[7]=(0,n.Fv)('<li class="item"><div href="#" class="nav_link submenu_item"><span class="navlink_icon"><i class="bx bx-file"></i></span><span class="navlink">Reports</span></div></li>',1))]),t[8]||(t[8]=(0,n.Fv)('<div class="bottom_content"><div class="bottom expand_sidebar"><span> Expand</span><i class="bx bx-log-in"></i></div><div class="bottom collapse_sidebar"><span> Collapse</span><i class="bx bx-log-out"></i></div></div>',1))])])],64)}var it={mounted(){const e=document.querySelector(".sidebar"),t=document.querySelectorAll(".submenu_item"),a=document.querySelector("#sidebarOpen"),s=document.querySelector(".collapse_sidebar"),n=document.querySelector(".expand_sidebar");a.addEventListener("click",(()=>e.classList.toggle("close"))),s.addEventListener("click",(()=>{e.classList.add("close","hoverable")})),n.addEventListener("click",(()=>{e.classList.remove("close","hoverable")})),e.addEventListener("mouseenter",(()=>{e.classList.contains("hoverable")&&e.classList.remove("close")})),e.addEventListener("mouseleave",(()=>{e.classList.contains("hoverable")&&e.classList.add("close")})),t.forEach(((e,a)=>{e.addEventListener("click",(()=>{e.classList.toggle("show_submenu"),t.forEach(((e,t)=>{a!==t&&e.classList.remove("show_submenu")}))}))}))},methods:{getDashboardRoute(){const e=localStorage.getItem("userRole");switch(e){case"ADMIN":return"/admin-dashboard";case"User":return"/user-dashboard";default:return"/home"}}}};const rt=(0,r.A)(it,[["render",ot]]);var dt=rt;const ct={class:"slider-container"},mt=["src","alt"];function ut(e,t,a,s,l,o){return(0,n.uX)(),(0,n.CE)("div",ct,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.images,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"slide",style:(0,$.Tr)({opacity:l.currentSlide===t?1:0})},[(0,n.Lk)("img",{src:e,alt:`Image ${t+1}`},null,8,mt)],4)))),128))])}var pt={data(){return{images:[a(1131),a(9840),a(4978)],currentSlide:0}},mounted(){this.startSlider()},methods:{startSlider(){setInterval((()=>{this.currentSlide=(this.currentSlide+1)%this.images.length}),3e3)}}};const ht=(0,r.A)(pt,[["render",ut],["__scopeId","data-v-63819354"]]);var bt=ht,ft={components:{Navbar:R,Sidebar:dt,ImageSlider:bt},mounted(){window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const kt=(0,r.A)(ft,[["render",qe],["__scopeId","data-v-3cde1d02"]]);var vt=kt;const gt={class:"attendance-page"},Lt={key:0,class:"loading-screen"},yt={class:"main-content"},_t=["value"],wt={class:"table-container"},St=["onClick"];function At(e,t,a,l,o,i){const r=(0,n.g2)("AdminSidebar"),d=(0,n.g2)("UserSidebar"),c=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",gt,[o.loading?((0,n.uX)(),(0,n.CE)("div",Lt,t[6]||(t[6]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),i.isAdmin?((0,n.uX)(),(0,n.Wv)(r,{key:1})):((0,n.uX)(),(0,n.Wv)(d,{key:2})),(0,n.Lk)("div",yt,[(0,n.bF)(c),t[9]||(t[9]=(0,n.Lk)("h1",null,"Attendance Management",-1)),(0,n.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)((()=>{}),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),placeholder:"Enter Name",required:"",onKeydown:t[1]||(t[1]=(0,s.jR)(((...e)=>i.checkName&&i.checkName(...e)),["enter"]))},null,544),[[s.Jo,o.name]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedService=e)},[t[7]||(t[7]=(0,n.Lk)("option",{disabled:"",value:""},"Select service Type",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.services,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,_t)))),128))],512),[[s.u1,o.selectedService]]),(0,n.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(0,s.D$)(((...e)=>i.markAttendance&&i.markAttendance(...e)),["prevent"]))},"Mark Attendance"),(0,n.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(0,s.D$)(((...e)=>i.editAttendance&&i.editAttendance(...e)),["prevent"]))},"Edit Attendance")],32),t[10]||(t[10]=(0,n.Lk)("h2",null,"Attendance List",-1)),(0,n.Lk)("div",wt,[(0,n.Lk)("table",null,[t[8]||(t[8]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Date"),(0,n.Lk)("th",null,"Attendance Status"),(0,n.Lk)("th",null,"Service Type")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.attendanceList,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t,onClick:t=>i.populateName(e.name,e.membersId,e.attendanceStatus,e.attendanceID)},[(0,n.Lk)("td",null,(0,$.v_)(e.name),1),(0,n.Lk)("td",null,(0,$.v_)(e.date),1),(0,n.Lk)("td",null,(0,$.v_)(e.attendanceStatus),1),(0,n.Lk)("td",null,(0,$.v_)(e.serviceType),1)],8,St)))),128))])])])])])}var Nt={components:{AdminSidebar:q,UserSidebar:dt,Navbar:R},data(){return{loading:!1,services:["First Service","Second Service","Third Service"],selectedService:"",name:"",isSearching:!1,isMarkingAttendance:!1,isEditingAttendance:!1,attendanceList:[],members_ID:"",currentStatus:"",attendanceIDS:""}},computed:{isAdmin(){return"ADMIN"===localStorage.getItem("userRole")}},methods:{async checkName(){if(this.loading=!0,console.info("About to check name"),!this.isMarkingAttendance){this.isSearching=!0,console.log("Searching for:",this.name);try{const t=await C.A.get(`http://localhost:5000/members/get_member_by_words/${this.name}`);if(console.info(t),"Members with the given names do not exist"!==t.data.detail){if(console.info("Member found"),t.data.length>0){console.info("Appending members"),this.attendanceList=[];for(const a of t.data)try{const e=await C.A.get(`https://churchmsbackend.onrender.com/attendance/get_attendance_by_member_id/${a.id}`);console.info(e);let t="Not Marked",s="",n="";"Attendance with the given member ID does not exist"!==e.data.detail?(console.info("member attendance found"),t=e.data.status,s=e.data.id,n=e.data.serviceType):(console.info("member attendance notfound"),t="Not Marked",n="Not Indicated");let l=a.firstname||"",o=a.othername||"",i=a.lastname||"";const r=(new Date).toLocaleDateString(),d=`${l} ${o} ${i}`;this.attendanceList.push({name:d,date:r,attendanceStatus:t,membersId:a.id,attendanceID:s,serviceType:n})}catch(e){console.error("Error fetching attendance:",e)}this.name=""}}else alert(t.data.detail)}catch(t){console.error("Attendance error:",t),alert("An error occurred during attendance processing. Please try again.")}finally{this.loading=!1}setTimeout((()=>{this.isSearching=!1}),10)}},async markAttendance(){if(this.isSearching)console.info("its searching");else if(!this.isEditingAttendance){this.isMarkingAttendance=!0,console.info("you are in markAttendance"),console.info("member id",this.members_ID),console.info("name",this.name),console.info("attendance Status",this.currentStatus),console.info("attendance Id",this.attendanceIDS),this.loading=!0,console.log("Sending Data:",{memberID:this.members_ID||"",name:this.name,status:"PRESENT",serviceType:this.selectedService||""});try{const e=await C.A.post("https://churchmsbackend.onrender.com/attendance/create_attendance",{memberID:this.members_ID,name:this.name,status:"PRESENT",serviceType:this.selectedService||""});if(console.info(e),"Attendance creation successful"!==e.data.message)return"Attendance marked for this member"===e.data?(alert("Attendance marked for this member."),this.name="",void setTimeout((()=>{this.isMarkingAttendance=!1}),10)):(console.info("current response ",e.data),alert("Invalid Attendance details"),this.name="",void setTimeout((()=>{this.isMarkingAttendance=!1}),10));console.info("Attendance list is being updated"),this.attendanceList=[],this.attendanceList.push({name:e.data.Attendance.fullname,date:e.data.Attendance.date,attendanceStatus:e.data.Attendance.status,serviceType:e.data.Attendance.serviceType,attendanceID:e.data.Attendance.id}),this.name="",setTimeout((()=>{this.isMarkingAttendance=!1}),10),console.info("still in marking")}catch{console.info("Attendance not created, Try again")}finally{this.loading=!1}}},async editAttendance(){if(this.isSearching)return;if(this.isMarkingAttendance)return;this.isEditingAttendance=!0,console.info("Editing Attendance");let e="";if("NotMarked"!==this.currentStatus){console.info("in if "),"PRESENT"===this.currentStatus?e="ABSENT":"ABSENT"===this.currentStatus&&(e="PRESENT"),this.loading=!0;try{console.info("with editing endpoint");const t=await C.A.patch(`https://churchmsbackend.onrender.com/attendance/update_individual_attendance_fields/${this.attendanceIDS}`,{status:e,serviceType:this.selectedService});console.info("this is me",t),console.info("dghjk ",t.data),t.data?(console.info("pass the if"),console.info("Attendance list is being updated"),this.attendanceList=[],this.attendanceList.push({name:t.data.fullname,date:t.data.date,attendanceStatus:t.data.status,serviceType:t.data.serviceType,attendanceID:t.data.id}),console.info("this is now the new id",this.attendanceIDS),this.name="",setTimeout((()=>{this.isEditingAttendance=!1}),10)):alert("Invalid Attendance details")}catch{console.info("Attendance not updated, Try again")}finally{this.loading=!1}}},populateName(e,t,a,s){console.info("am here too paste"),this.name=e,this.members_ID=t,this.currentStatus=a,this.attendanceIDS=s}},mounted(){window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const Ct=(0,r.A)(Nt,[["render",At],["__scopeId","data-v-1326f84f"]]);var Et=Ct;const xt={class:"attendance-page"},Ut={key:0,class:"loading-screen"},It={class:"main-content"},Mt={class:"left_view"},Dt={class:"total_attendance"},Pt={class:"total_present"},Vt={class:"total_absent"},Ft=["onClick"];function Bt(e,t,a,s,l,o){const i=(0,n.g2)("AdminSidebar"),r=(0,n.g2)("UserSidebar"),d=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",xt,[l.loading?((0,n.uX)(),(0,n.CE)("div",Ut,t[4]||(t[4]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),o.isAdmin?((0,n.uX)(),(0,n.Wv)(i,{key:1})):((0,n.uX)(),(0,n.Wv)(r,{key:2})),(0,n.Lk)("div",It,[(0,n.bF)(d),t[9]||(t[9]=(0,n.Lk)("h1",null,"Attendance Overview",-1)),(0,n.Lk)("section",Mt,[(0,n.Lk)("button",{class:"button1",onClick:t[0]||(t[0]=(...e)=>o.attendance&&o.attendance(...e))},"Attendance"),(0,n.Lk)("button",{class:"button2",onClick:t[1]||(t[1]=(...e)=>o.presentAttendance&&o.presentAttendance(...e))}," Attendees"),(0,n.Lk)("button",{class:"button3",onClick:t[2]||(t[2]=(...e)=>o.absentAttendance&&o.absentAttendance(...e))},"Absentees"),(0,n.Lk)("button",{class:"button4",onClick:t[3]||(t[3]=(...e)=>o.downloadAttendance&&o.downloadAttendance(...e))},"Download Attendance")]),(0,n.Lk)("div",Dt,[t[5]||(t[5]=(0,n.Lk)("p",null,"Total Attendance ",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAttendance),1)]),(0,n.Lk)("div",Pt,[t[6]||(t[6]=(0,n.Lk)("p",null,"Present",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalPresent),1)]),(0,n.Lk)("div",Vt,[t[7]||(t[7]=(0,n.Lk)("p",null,"Absent",-1)),(0,n.Lk)("h5",null,(0,$.v_)(l.totalAbsent),1)]),(0,n.Lk)("table",null,[t[8]||(t[8]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Date"),(0,n.Lk)("th",null,"Attendance Status"),(0,n.Lk)("th",null,"Service Type")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.attendanceList,((t,a)=>((0,n.uX)(),(0,n.CE)("tr",{key:a,onClick:a=>e.populateName(t)},[(0,n.Lk)("td",null,(0,$.v_)(t.name),1),(0,n.Lk)("td",null,(0,$.v_)(t.date),1),(0,n.Lk)("td",null,(0,$.v_)(t.attendanceStatus),1),(0,n.Lk)("td",null,(0,$.v_)(t.serviceType),1)],8,Ft)))),128))])])])])}a(4603),a(7566),a(8721);var Rt={components:{AdminSidebar:q,UserSidebar:dt,Navbar:R},data(){return{loading:!1,totalAttendance:0,totalPresent:0,totalAbsent:0,attendanceList:[]}},computed:{isAdmin(){return"ADMIN"===localStorage.getItem("userRole")}},methods:{async fetchSummaryData(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_attendance_for_the_current_day");this.totalAttendance=e.data.total_attendance,this.totalPresent=e.data.present_attendance,this.totalAbsent=e.data.absent_attendance}catch(e){console.error("Error fetching summary data:",e)}finally{this.loading=!1}},async attendance(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_attendance_data");this.attendanceList=e.data,console.info("attendance list",e.data),"No data found"!==e.data?this.attendanceList=e.data.map((e=>({name:e.fullname,date:e.date,attendanceStatus:e.status,serviceType:e.serviceType}))):this.attendanceList=[]}catch(e){console.error("Error fetching attendance list:",e)}finally{this.loading=!1}},async presentAttendance(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_present_attendance_data");this.attendanceList=e.data,console.info("asbsent attendance list",e.data),"No data found"!==e.data?this.attendanceList=e.data.map((e=>({name:e.fullname,date:e.date,attendanceStatus:e.status,serviceType:e.serviceType}))):this.attendanceList=[]}catch(e){console.error("Error fetching attendance list:",e)}finally{this.loading=!1}},async absentAttendance(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_absent_attendance_data");this.attendanceList=e.data,console.info("present attendance list",e.data),"No data found"!==e.data?this.attendanceList=e.data.map((e=>({name:e.fullname,date:e.date,attendanceStatus:e.status,serviceType:e.serviceType}))):this.attendanceList=[]}catch(e){console.error("Error fetching attendance list:",e)}finally{this.loading=!1}},async downloadAttendance(){console.info("In the download attendance function");try{const e=await C.A.get("http://localhost:5000/attendance/download_current_attendance_data",{responseType:"blob"});console.info("Response:",e);const t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});console.info("File response converted:",t);const a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a;const n=e.headers["content-disposition"];let l="attendance_data.xlsx";if(n){const e=n.match(/filename="(.+)"/);e&&e[1]&&(l=e[1])}s.download=l,document.body.appendChild(s),s.click(),document.body.removeChild(s),console.info("File is downloaded"),window.URL.revokeObjectURL(a)}catch(e){console.error("Error downloading the file:",e)}}},mounted(){this.fetchSummaryData(),window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const Tt=(0,r.A)(Rt,[["render",Bt],["__scopeId","data-v-3267d45b"]]);var Xt=Tt;const Ot={class:"attendance-page"},Jt={key:0,class:"loading-screen"},Gt={class:"main-content"},Kt={key:0,class:"first_info"},Qt=["value"],Wt={key:1},Zt=["value"],zt={key:2},Yt=["value"],Ht=["value"],jt=["value"],qt=["value"],$t=["value"],ea={key:3},ta=["value"],aa=["value"],sa=["value"],na=["value"],la={key:4},oa=["value"],ia={class:"image_container"},ra=["src"],da={key:5},ca={class:"progress-bar"};function ma(e,t,a,l,o,i){const r=(0,n.g2)("AdminSidebar"),d=(0,n.g2)("UserSidebar"),c=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",Ot,[o.loading?((0,n.uX)(),(0,n.CE)("div",Jt,t[51]||(t[51]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),i.isAdmin?((0,n.uX)(),(0,n.Wv)(r,{key:1})):((0,n.uX)(),(0,n.Wv)(d,{key:2})),(0,n.Lk)("div",Gt,[(0,n.bF)(c),t[114]||(t[114]=(0,n.Lk)("h1",null,"Membership Registration",-1)),(0,n.Lk)("form",{onSubmit:t[50]||(t[50]=(0,s.D$)(((...e)=>i.submitRegistration&&i.submitRegistration(...e)),["prevent"])),class:"registration-form"},[1===o.step?((0,n.uX)(),(0,n.CE)("div",Kt,[t[54]||(t[54]=(0,n.Lk)("h2",null,"Basic Information",-1)),t[55]||(t[55]=(0,n.Lk)("label",{class:"label_tt",for:"title"},"Title",-1)),(0,n.bo)((0,n.Lk)("select",{class:"tt","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.title=e),id:"title"},[t[52]||(t[52]=(0,n.Lk)("option",{disabled:"",value:""},"Select Title",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.titles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Qt)))),128))],512),[[s.u1,o.form.title]]),t[56]||(t[56]=(0,n.Lk)("label",{class:"label_fn",for:"firstName"},"First Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"fn",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.firstname=e),id:"firstName",placeholder:"First Name"},null,512),[[s.Jo,o.form.firstname]]),t[57]||(t[57]=(0,n.Lk)("label",{class:"label_mn",for:"middleName"},"Middle Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"mn",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.form.middlename=e),id:"middleName",placeholder:"Middle Name"},null,512),[[s.Jo,o.form.middlename]]),t[58]||(t[58]=(0,n.Lk)("label",{class:"label_ln",for:"lastName"},"Last Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ln",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.form.lastname=e),id:"lastName",placeholder:"Last Name"},null,512),[[s.Jo,o.form.lastname]]),t[59]||(t[59]=(0,n.Lk)("label",{class:"label_dobs",for:"dob"},"Date of Birth",-1)),(0,n.bo)((0,n.Lk)("input",{class:"dobs",type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>o.form.dateOfBirth=e),id:"dob",placeholder:"Date of Birth"},null,512),[[s.Jo,o.form.dateOfBirth]]),t[60]||(t[60]=(0,n.Lk)("label",{class:"label_gn",for:"gender"},"Gender",-1)),(0,n.bo)((0,n.Lk)("select",{class:"gn","onUpdate:modelValue":t[5]||(t[5]=e=>o.form.gender=e),id:"gender"},t[53]||(t[53]=[(0,n.Lk)("option",{disabled:"",value:""},"Select Gender",-1),(0,n.Lk)("option",{value:"Male"},"Male",-1),(0,n.Lk)("option",{value:"Female"},"Female",-1),(0,n.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,o.form.gender]]),t[61]||(t[61]=(0,n.Lk)("label",{class:"label_pn",for:"phoneNumber"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{class:"pn",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>o.form.phoneNumber=e),id:"phoneNumber",placeholder:"Phone Number"},null,512),[[s.Jo,o.form.phoneNumber]]),t[62]||(t[62]=(0,n.Lk)("label",{class:"label_ea",for:"email"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ea",type:"email","onUpdate:modelValue":t[7]||(t[7]=e=>o.form.email=e),id:"email",placeholder:"Email"},null,512),[[s.Jo,o.form.email]]),t[63]||(t[63]=(0,n.Lk)("label",{class:"label_ny",for:"nationality"},"Nationality",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ny",type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>o.form.nationality=e),id:"nationality",placeholder:"Nationality"},null,512),[[s.Jo,o.form.nationality]]),t[64]||(t[64]=(0,n.Lk)("label",{class:"label_ht",for:"homeTown"},"Home Town",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ht",type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>o.form.homeTown=e),id:"homeTown",placeholder:"Home Town"},null,512),[[s.Jo,o.form.homeTown]]),t[65]||(t[65]=(0,n.Lk)("label",{class:"label_ha",for:"homeAddress"},"Home Address",-1)),(0,n.bo)((0,n.Lk)("input",{class:"ha",type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>o.form.homeAddress=e),id:"homeAddress",placeholder:"Home Address"},null,512),[[s.Jo,o.form.homeAddress]]),(0,n.Lk)("button",{type:"button",onClick:t[11]||(t[11]=(...e)=>i.nextStep&&i.nextStep(...e))},"Next")])):(0,n.Q3)("",!0),2===o.step?((0,n.uX)(),(0,n.CE)("div",Wt,[t[67]||(t[67]=(0,n.Lk)("h2",{class:"step2_first_h2"}," Professional Background",-1)),t[68]||(t[68]=(0,n.Lk)("label",{class:"label_auw",for:"auw"},"Are you working",-1)),(0,n.bo)((0,n.Lk)("select",{class:"auw","onUpdate:modelValue":t[12]||(t[12]=e=>o.form.workingStatus=e),id:"auw"},[t[66]||(t[66]=(0,n.Lk)("option",{disabled:"",value:""},"Select Working Status",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.working,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Zt)))),128))],512),[[s.u1,o.form.workingStatus]]),t[69]||(t[69]=(0,n.Lk)("label",{class:"label_op",for:"occupation"},"Occupation",-1)),(0,n.bo)((0,n.Lk)("input",{class:"op",type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>o.form.occupation=e),id:"occupation",placeholder:"Occupation"},null,512),[[s.Jo,o.form.occupation]]),t[70]||(t[70]=(0,n.Lk)("label",{class:"label_qf",for:"qualification"},"Qualification",-1)),(0,n.bo)((0,n.Lk)("input",{class:"qf",type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>o.form.qualification=e),id:"qualification",placeholder:"Qualification"},null,512),[[s.Jo,o.form.qualification]]),t[71]||(t[71]=(0,n.Lk)("label",{class:"label_in",for:"institutionName"},"Institution Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"in",type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>o.form.institutionName=e),id:"institutionName",placeholder:"Institution Name"},null,512),[[s.Jo,o.form.institutionName]]),t[72]||(t[72]=(0,n.Lk)("h2",{class:"step2_second_h2"},"Family & Emergency Contact Information",-1)),t[73]||(t[73]=(0,n.Lk)("label",{class:"label_man",for:"dob"},"Mothers Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"man",type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>o.form.mothersName=e),id:"mothersName",placeholder:"Mothers name"},null,512),[[s.Jo,o.form.mothersName]]),t[74]||(t[74]=(0,n.Lk)("label",{class:"label_fan",for:"fathersName"},"Fathers Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"fan",type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>o.form.fathersName=e),id:"fathersName",placeholder:"Fathers name"},null,512),[[s.Jo,o.form.fathersName]]),t[75]||(t[75]=(0,n.Lk)("label",{class:"label_nok",for:"nextOfKin"},"Next of kin",-1)),(0,n.bo)((0,n.Lk)("input",{class:"nok",type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>o.form.nextOfKin=e),id:"nextOfKin",placeholder:"Next of kin"},null,512),[[s.Jo,o.form.nextOfKin]]),t[76]||(t[76]=(0,n.Lk)("label",{class:"label_nokp",for:"nextOfKinPhone"},"Next Of Kin Phone",-1)),(0,n.bo)((0,n.Lk)("input",{class:"nokp",type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>o.form.nextOfKinPhoneNumber=e),id:"nextOfKinPhone",placeholder:"Next Of Kin Phone"},null,512),[[s.Jo,o.form.nextOfKinPhoneNumber]]),(0,n.Lk)("button",{class:"s2preveBut",type:"button",onClick:t[20]||(t[20]=(...e)=>i.prevStep&&i.prevStep(...e))},"Previous"),(0,n.Lk)("button",{class:"s2nextBut",type:"button",onClick:t[21]||(t[21]=(...e)=>i.nextStep&&i.nextStep(...e))},"Next")])):(0,n.Q3)("",!0),3===o.step?((0,n.uX)(),(0,n.CE)("div",zt,[t[82]||(t[82]=(0,n.Lk)("h2",{class:"step3_first_h2"}," Family & Emergency Contact Information 2",-1)),t[83]||(t[83]=(0,n.Lk)("label",{class:"label_mariSta",for:"maritalStatus"},"Marital Status",-1)),(0,n.bo)((0,n.Lk)("select",{class:"mariSta","onUpdate:modelValue":t[22]||(t[22]=e=>o.form.maritalStatus=e),id:"maritalStatus"},[t[77]||(t[77]=(0,n.Lk)("option",{disabled:"",value:""},"Select Marital Status",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.maritalS,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Yt)))),128))],512),[[s.u1,o.form.maritalStatus]]),t[84]||(t[84]=(0,n.Lk)("label",{class:"label_spcon",for:"spouseContact"},"Spouse contact",-1)),(0,n.bo)((0,n.Lk)("input",{class:"spcon",type:"text","onUpdate:modelValue":t[23]||(t[23]=e=>o.form.spouseContact=e),id:"spouseContact",placeholder:"Spouse Contact"},null,512),[[s.Jo,o.form.spouseContact]]),t[85]||(t[85]=(0,n.Lk)("label",{class:"label_spnam",for:"spouseName"},"Spouse Name ",-1)),(0,n.bo)((0,n.Lk)("input",{class:"spnam",type:"text","onUpdate:modelValue":t[24]||(t[24]=e=>o.form.spouseName=e),id:"spouseName",placeholder:"Spouse Name"},null,512),[[s.Jo,o.form.spouseName]]),t[86]||(t[86]=(0,n.Lk)("label",{class:"label_noch",for:"numberOfChildren"},"Number of children",-1)),(0,n.bo)((0,n.Lk)("input",{class:"noch",type:"text","onUpdate:modelValue":t[25]||(t[25]=e=>o.form.numberOfChildren=e),id:"numberOfChildren",placeholder:"Number of children"},null,512),[[s.Jo,o.form.numberOfChildren]]),t[87]||(t[87]=(0,n.Lk)("h2",{class:"step3_second_h2"}," Church Details ",-1)),t[88]||(t[88]=(0,n.Lk)("label",{class:"label_meT",for:"memeberType"},"Member Type",-1)),(0,n.bo)((0,n.Lk)("select",{class:"meT","onUpdate:modelValue":t[26]||(t[26]=e=>o.form.memberType=e),id:"memberType"},[t[78]||(t[78]=(0,n.Lk)("option",{disabled:"",value:""},"Select Member Type",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.memberT,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Ht)))),128))],512),[[s.u1,o.form.memberType]]),t[89]||(t[89]=(0,n.Lk)("label",{class:"label_zone",for:"cell"},"Cell",-1)),(0,n.bo)((0,n.Lk)("select",{class:"zone","onUpdate:modelValue":t[27]||(t[27]=e=>o.form.cell=e),id:"cell"},[t[79]||(t[79]=(0,n.Lk)("option",{disabled:"",value:""},"Select Cell",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.cells,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,jt)))),128))],512),[[s.u1,o.form.cell]]),t[90]||(t[90]=(0,n.Lk)("label",{class:"label_dapNa",for:"departmentName"},"cell",-1)),(0,n.bo)((0,n.Lk)("select",{class:"dapNa","onUpdate:modelValue":t[28]||(t[28]=e=>o.form.departmentName=e),id:"departmentName"},[t[80]||(t[80]=(0,n.Lk)("option",{disabled:"",value:""},"Select Department Name",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.departmentNames,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,qt)))),128))],512),[[s.u1,o.form.departmentName]]),t[91]||(t[91]=(0,n.Lk)("label",{class:"label_datJo",for:"datejoined"},"DateJoined",-1)),(0,n.bo)((0,n.Lk)("input",{class:"datJo",type:"date","onUpdate:modelValue":t[29]||(t[29]=e=>o.form.dateJoined=e),id:"dateJoined",placeholder:"dateJoined"},null,512),[[s.Jo,o.form.dateJoined]]),t[92]||(t[92]=(0,n.Lk)("label",{class:"label_claSelec",for:"classSelection"},"Class Selection",-1)),(0,n.bo)((0,n.Lk)("select",{class:"claSelec","onUpdate:modelValue":t[30]||(t[30]=e=>o.form.classSelection=e),id:"classSelection"},[t[81]||(t[81]=(0,n.Lk)("option",{disabled:"",value:""},"Select Class Selection",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.classsels,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,$t)))),128))],512),[[s.u1,o.form.classSelection]]),(0,n.Lk)("button",{class:"s3preveBut",type:"button",onClick:t[31]||(t[31]=(...e)=>i.prevStep&&i.prevStep(...e))},"Previous"),(0,n.Lk)("button",{class:"s3nextBut",type:"button",onClick:t[32]||(t[32]=(...e)=>i.nextStep&&i.nextStep(...e))},"Next")])):(0,n.Q3)("",!0),4===o.step?((0,n.uX)(),(0,n.CE)("div",ea,[t[97]||(t[97]=(0,n.Lk)("h2",{class:"step4_first_h2"}," Church Details 2",-1)),t[98]||(t[98]=(0,n.Lk)("label",{class:"label_spGi",for:"spiritualGift"},"Spiritual Gift(s)",-1)),(0,n.bo)((0,n.Lk)("input",{class:"spGi",type:"text","onUpdate:modelValue":t[33]||(t[33]=e=>o.form.spiritualGift=e),id:"spiritualGift",placeholder:"Spiritual Gift"},null,512),[[s.Jo,o.form.spiritualGift]]),t[99]||(t[99]=(0,n.Lk)("label",{class:"label_posi",for:"position"},"Position",-1)),(0,n.bo)((0,n.Lk)("select",{class:"posi","onUpdate:modelValue":t[34]||(t[34]=e=>o.form.position=e),id:"position"},[t[93]||(t[93]=(0,n.Lk)("option",{disabled:"",value:""},"Select Position",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.positions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,ta)))),128))],512),[[s.u1,o.form.position]]),t[100]||(t[100]=(0,n.Lk)("label",{class:"label_waterBa",for:"waterBa"},"Water Baptised",-1)),(0,n.bo)((0,n.Lk)("select",{class:"waterBa","onUpdate:modelValue":t[35]||(t[35]=e=>o.form.waterBaptised=e),id:"waterBaptised"},[t[94]||(t[94]=(0,n.Lk)("option",{disabled:"",value:""},"Select option",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.waterBaps,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,aa)))),128))],512),[[s.u1,o.form.waterBaptised]]),t[101]||(t[101]=(0,n.Lk)("label",{class:"label_batby",for:"baptisedBy"},"Babtised By ",-1)),(0,n.bo)((0,n.Lk)("input",{class:"batby",type:"text","onUpdate:modelValue":t[36]||(t[36]=e=>o.form.baptisedBy=e),id:"baptisedBy",placeholder:"Baptised By"},null,512),[[s.Jo,o.form.baptisedBy]]),t[102]||(t[102]=(0,n.Lk)("label",{class:"label_dateBapt",for:"dateBaptised"},"Date Baptised",-1)),(0,n.bo)((0,n.Lk)("input",{class:"dateBapt",type:"date","onUpdate:modelValue":t[37]||(t[37]=e=>o.form.dateBaptised=e),id:"dateBaptised",placeholder:"Date Baptised"},null,512),[[s.Jo,o.form.dateBaptised]]),t[103]||(t[103]=(0,n.Lk)("label",{class:"label_bbths",for:"bbths"},"Baptised by the Holy Spirit",-1)),(0,n.bo)((0,n.Lk)("select",{class:"bbths","onUpdate:modelValue":t[38]||(t[38]=e=>o.form.baptisedBy=e),id:"baptisedByTheHolySpirit",required:""},[t[95]||(t[95]=(0,n.Lk)("option",{disabled:"",value:""},"Select option",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.baptisedBys,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,sa)))),128))],512),[[s.u1,o.form.baptisedBy]]),t[104]||(t[104]=(0,n.Lk)("label",{class:"label_memberSta",for:"memeberStatus"},"Member Status ",-1)),(0,n.bo)((0,n.Lk)("select",{class:"memberSta","onUpdate:modelValue":t[39]||(t[39]=e=>o.form.memberStatus=e),id:"memberStatus"},[t[96]||(t[96]=(0,n.Lk)("option",{disabled:"",value:""},"Select Member Status",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.memberStatuses,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,na)))),128))],512),[[s.u1,o.form.memberStatus]]),(0,n.Lk)("button",{class:"s4preveBut",type:"button",onClick:t[40]||(t[40]=(...e)=>i.prevStep&&i.prevStep(...e))},"Previous"),(0,n.Lk)("button",{class:"s4nextBut",type:"button",onClick:t[41]||(t[41]=(...e)=>i.nextStep&&i.nextStep(...e))},"Next")])):(0,n.Q3)("",!0),5===o.step?((0,n.uX)(),(0,n.CE)("div",la,[t[106]||(t[106]=(0,n.Lk)("h2",{class:"step5_first_h2"}," Other Info",-1)),t[107]||(t[107]=(0,n.Lk)("label",{class:"label_datDece",for:"dateDeceased"},"Date Deceased",-1)),(0,n.bo)((0,n.Lk)("input",{class:"datDece",type:"date","onUpdate:modelValue":t[42]||(t[42]=e=>o.form.dateDeceased=e),id:"dateDeceased",placeholder:"DateDeceased"},null,512),[[s.Jo,o.form.dateDeceased]]),t[108]||(t[108]=(0,n.Lk)("label",{class:"label_datBur",for:"dateBuried"},"Date Buried",-1)),(0,n.bo)((0,n.Lk)("input",{class:"datBur",type:"date","onUpdate:modelValue":t[43]||(t[43]=e=>o.form.dateBuried=e),id:"dateburied",placeholder:"Date Buried"},null,512),[[s.Jo,o.form.dateBuried]]),t[109]||(t[109]=(0,n.Lk)("label",{class:"label_confirm",for:"confirmed"},"Confirmed",-1)),(0,n.bo)((0,n.Lk)("select",{class:"confirm","onUpdate:modelValue":t[44]||(t[44]=e=>o.form.confirmed=e),id:"confirmed"},[t[105]||(t[105]=(0,n.Lk)("option",{disabled:"",value:""},"Select confirmed",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.confirmeds,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,oa)))),128))],512),[[s.u1,o.form.confirmed]]),t[110]||(t[110]=(0,n.Lk)("label",{class:"label_dateConfir",for:"dateConfirmed"},"Date Confirmed",-1)),(0,n.bo)((0,n.Lk)("input",{class:"dateConfir",type:"date","onUpdate:modelValue":t[45]||(t[45]=e=>o.form.dateConfirmed=e),id:"dateConfirmed",placeholder:"Date Comfired"},null,512),[[s.Jo,o.form.dateConfirmed]]),t[111]||(t[111]=(0,n.Lk)("label",{class:"label_comment",for:"comment"},"Comment",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"comment","onUpdate:modelValue":t[46]||(t[46]=e=>o.form.comment=e),id:"comment",placeholder:"Write your comment here..."},null,512),[[s.Jo,o.form.comment]]),(0,n.Lk)("input",{class:"label_image",type:"file",onChange:t[47]||(t[47]=(...e)=>i.handleImageUpload&&i.handleImageUpload(...e))},null,32),(0,n.Lk)("div",ia,[o.imageUrl?((0,n.uX)(),(0,n.CE)("img",{key:0,src:o.imageUrl,alt:"Image Preview",class:"images"},null,8,ra)):(0,n.Q3)("",!0)]),(0,n.Lk)("button",{class:"s5nextBut",type:"button",onClick:t[48]||(t[48]=(...e)=>i.prevStep&&i.prevStep(...e))},"Previous"),(0,n.Lk)("button",{class:"s5resetBut",type:"button",onClick:t[49]||(t[49]=(...e)=>i.nextStep&&i.nextStep(...e))},"Reset"),t[112]||(t[112]=(0,n.Lk)("button",{class:"s5SaveBut",type:"submit"},"Submit",-1))])):(0,n.Q3)("",!0),6===o.step?((0,n.uX)(),(0,n.CE)("div",da,t[113]||(t[113]=[(0,n.Lk)("h2",{class:"step6_first_h21"}," Member creation complete !!!",-1),(0,n.Lk)("h2",{class:"step6_first_h22"}," If you have not added the members image, remember to add it. ",-1),(0,n.Lk)("h2",{class:"step6_first_h23"}," To access the member details, go to member sublinks. ",-1)]))):(0,n.Q3)("",!0)],32),(0,n.Lk)("div",ca,[(0,n.Lk)("div",{style:(0,$.Tr)({width:33*(o.step-1)+"%"}),class:"progress"},null,4)])])])}var ua={components:{AdminSidebar:q,UserSidebar:dt,Navbar:R},data(){return{loading:!1,step:1,imageUrl:null,selectedImage:null,titles:["Mr","Miss","Mrs","Master","Dr","Prof","Eng","Prophet","Apostle","Pastor","Presiding Elder","Elder","Deacon","Deaconess","Brother","Sister","Reverend","Very Reverend","Rt Reverend"],working:["Yes","No"],maritalS:["Married (Ordinance)","Married (Customary)","Married (Blessing)","Single","Divorced"],memberT:["Member","Inactive","Visitor","Child","Backslider","Transferred-in","Transferred-out","Student"],cells:["Salosi cell","Bruku cell(Pastor ivan 233556758997)","Junction cell","Takyikope cell","Aggrey cell(mama cynthia 233242309320)","Manya cell","Gblaka cell(mr nelson dangbe 233244787620)","Habitat cell(mr. Ahotor 233241847237)","Downtown cell(miss pomary dinah 233245435604)","Across cell","Ayikuma cell","Peace cell","Mataheko cell","Kordiabe cell"],departmentNames:["Men Ministries","Women Ministries","Youth Ministry","Joy Ministry","Missionnettes","Pathfinders","Royal Rangers","Youth Singles","Missions","Protocol/Ushering","Children Ministry","Music","Sanctuary Keepers"],classsels:["English Adult","Ewe Adult(Faith)","Twi Adult","Dangbe Adult","Discipleship class 1"," Discipleship class 2","Deliverance class","New Convent","Youth English","Children","Ewe Adult(Love)"],positions:["Women Ministries President","Women Ministries Vice President","Women Ministries Secretary","Women Ministries Treasurer","Women Ministries Organizer","Men Ministry President","Men Ministry Vice President","Men Ministry Secretary","Men Ministry Treasurer","Men Ministry Organizer","Joy Fellowship President","Joy Fellowship President"],waterBaps:["Yes","No"],baptisedBys:["Yes","No"],memberStatuses:["Alive","Deceased"],confirmeds:["Yes","No","Pending"],form:{title:"",firstname:"",middlename:"",lastname:"",dateOfBirth:"",gender:"",phoneNumber:"",email:"",nationality:"",homeTown:"",workingStatus:"",homeAddress:"",occupation:"",qualification:"",institutionName:"",mothersName:"",fathersName:"",nextOfKin:"",nextOfKinPhoneNumber:"",maritalStatus:"",spouseContact:"",spouseName:"",numberOfChildren:"",memberType:"",cell:"",departmentName:"",dateJoined:"",classSelection:"",spiritualGift:"",position:"",waterBaptised:"",baptisedBy:"",dateBaptised:"",baptisedByTheHolySpirit:"",memberStatus:"",dateDeceased:"",dateBuried:"",confirmed:"",dateConfirmed:"",comment:""}}},computed:{isAdmin(){return"ADMIN"===localStorage.getItem("userRole")}},methods:{nextStep(){this.step<6&&this.step++},prevStep(){this.step>1&&this.step--},handleImageUpload(e){const t=e.target.files[0];console.info("in image handeler"),console.info(t),t&&(this.imageUrl=URL.createObjectURL(t),this.selectedImage=t)},async submitRegistration(){console.info("in submit"),console.info("image",this.selectedImage),console.info("form",this.form.title),console.info("form",this.form);const e={title:this.form.title,firstname:this.form.firstname,middlename:this.form.middlename,lastname:this.form.lastname,dateOfBirth:this.form.dateOfBirth,gender:this.form.gender,phoneNumber:this.form.phoneNumber,email:this.form.email,nationality:this.form.nationality,homeTown:this.form.homeTown,workingStatus:this.form.workingStatus,homeAddress:this.form.homeAddress,occupation:this.form.occupation,qualification:this.form.qualification,institutionName:this.form.institutionName,mothersName:this.form.mothersName,fathersName:this.form.fathersName,nextOfKin:this.form.nextOfKin,nextOfKinPhoneNumber:this.form.nextOfKinPhoneNumber,maritalStatus:this.form.maritalStatus,spouseContact:this.form.spouseContact,spouseName:this.form.spouseName,numberOfChildren:this.form.numberOfChildren,memberType:this.form.memberType,cell:this.form.cell,departmentName:this.form.departmentName,dateJoined:this.form.dateJoined,classSelection:this.form.classSelection,spiritualGift:this.form.spiritualGift,position:this.form.position,waterBaptised:this.form.waterBaptised,baptisedBy:this.form.baptisedBy,dateBaptised:this.form.dateBaptised,baptisedByTheHolySpirit:this.form.baptisedByTheHolySpirit,memberStatus:this.form.memberStatus,dateDeceased:this.form.dateDeceased,dateBuried:this.form.dateBuried,confirmed:this.form.confirmed,dateConfirmed:this.form.dateConfirmed,comment:this.form.comment};if(console.info("form",e),e&&Object.keys(e).length>0){this.loading=!0;try{const a=await C.A.post("https://churchmsbackend.onrender.com/members/create_member",e);if(console.info(a.data),"Member registeration successfully"===a.data.message&&null!==this.selectedImage){const e=new FormData;let a=this.form.firstname+" "+this.form.middlename+" "+this.form.lastname;e.append("fullname",a),e.append("file",this.selectedImage),this.loading=!0;try{const t=await C.A.post("https://churchmsbackend.onrender.com/members/create_member_image",e,{headers:{"Content-Type":"multipart/form-data"}});console.info("response from image",t.data),"Member image creation successful"===t.data.message?this.step=6:alert("Image data not saved")}catch(t){console.error("Saving image  error:",t),alert("An error occurred during saving of member image. Please try again.")}finally{this.loading=!1}}else"Member registeration successfully"===a.data.message?(alert("User Data  saved, add image later"),this.step=1,window.location.reload()):alert("User Data not saved")}catch(t){console.error("Saving member details error:",t),alert("An error occurred during member registeration. Please try again.")}finally{this.loading=!1}}else alert("No data found ")}},mounted(){console.info("in mounted"),window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const pa=(0,r.A)(ua,[["render",ma],["__scopeId","data-v-6071e070"]]);var ha=pa;const ba={id:"app"};function fa(e,t,a,s,l,o){const i=(0,n.g2)("UploadMembers");return(0,n.uX)(),(0,n.CE)("div",ba,[(0,n.bF)(i)])}const ka={class:"upload-container"},va=["disabled"],ga={key:0};function La(e,t,a,l,o,i){return(0,n.uX)(),(0,n.CE)("div",ka,[t[2]||(t[2]=(0,n.Lk)("h1",null,"Import Members",-1)),(0,n.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>i.uploadFile&&i.uploadFile(...e)),["prevent"]))},[(0,n.Lk)("input",{type:"file",accept:".xlsx",onChange:t[0]||(t[0]=(...e)=>i.handleFileUpload&&i.handleFileUpload(...e)),required:""},null,32),(0,n.Lk)("button",{type:"submit",disabled:!o.selectedFile},"Upload",8,va)],32),o.responseMessage?((0,n.uX)(),(0,n.CE)("p",ga,(0,$.v_)(o.responseMessage),1)):(0,n.Q3)("",!0)])}var ya={data(){return{selectedFile:null,responseMessage:""}},methods:{handleFileUpload(e){this.selectedFile=e.target.files[0]},async uploadFile(){if(!this.selectedFile)return void(this.responseMessage="Please select a file!");const e=new FormData;e.append("file",this.selectedFile);try{const t=await C.A.post("http://localhost:5000/members/upload",e,{headers:{"Content-Type":"multipart/form-data"}});this.responseMessage=t.data}catch(t){this.responseMessage="Error uploading file: "+t.response?.data||0}}}};const _a=(0,r.A)(ya,[["render",La]]);var wa=_a,Sa={components:{UploadMembers:wa}};const Aa=(0,r.A)(Sa,[["render",fa]]);var Na=Aa;const Ca={class:"attendance-page"},Ea={key:0,class:"loading-screen"},xa={class:"main-content"},Ua={class:"left_view"},Ia={class:"left_view"},Ma={class:"table-container"},Da=["onClick"],Pa=["onClick"],Va={class:"modal-card"},Fa=["value"];function Ba(e,t,a,l,o,i){const r=(0,n.g2)("AdminSidebar"),d=(0,n.g2)("UserSidebar"),c=(0,n.g2)("Navbar");return(0,n.uX)(),(0,n.CE)("div",Ca,[o.loading?((0,n.uX)(),(0,n.CE)("div",Ea,t[20]||(t[20]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Loading, please wait...",-1)]))):(0,n.Q3)("",!0),e.isAdmin?((0,n.uX)(),(0,n.Wv)(r,{key:1})):((0,n.uX)(),(0,n.Wv)(d,{key:2})),(0,n.Lk)("div",xa,[(0,n.bF)(c),(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)((()=>{}),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),placeholder:"Enter Name",required:"",onKeydown:t[1]||(t[1]=(0,s.jR)(((...e)=>i.checkName&&i.checkName(...e)),["enter"]))},null,544),[[s.Jo,e.name]]),(0,n.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(0,s.D$)(((...e)=>i.checkName&&i.checkName(...e)),["prevent"]))},"Search Member")],32),(0,n.Lk)("section",Ua,[(0,n.Lk)("button",{class:"button4",onClick:t[4]||(t[4]=(...e)=>i.getMembers&&i.getMembers(...e))},"Get Members")]),(0,n.Lk)("section",Ia,[(0,n.Lk)("button",{class:"button5",onClick:t[5]||(t[5]=(...t)=>e.downloadMembers&&e.downloadMembers(...t))},"Download Members")]),(0,n.Lk)("div",Ma,[(0,n.Lk)("table",null,[t[21]||(t[21]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Phone Number"),(0,n.Lk)("th",null,"Member Status"),(0,n.Lk)("th",null,"Actions")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.memberList,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,$.v_)(e.name),1),(0,n.Lk)("td",null,(0,$.v_)(e.phoneNumber),1),(0,n.Lk)("td",null,(0,$.v_)(e.memberStatus),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"edit",onClick:t=>i.editUser(e)},"Edit",8,Da),(0,n.Lk)("button",{class:"delete",onClick:t=>i.deleteUser(e)},"Delete",8,Pa)])])))),128))])])]),o.showEditModal?((0,n.uX)(),(0,n.CE)("div",{key:0,onSubmit:t[19]||(t[19]=(0,s.D$)(((...e)=>i.updateUserDetails&&i.updateUserDetails(...e)),["prevent"])),class:"modal-overlay"},[(0,n.Lk)("div",Va,[t[28]||(t[28]=(0,n.Lk)("h2",null,"Update User ",-1)),t[29]||(t[29]=(0,n.Lk)("label",{class:"firstN"},"First Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"firstN-input","onUpdate:modelValue":t[6]||(t[6]=e=>o.form.firstname=e),type:"text"},null,512),[[s.Jo,o.form.firstname]]),t[30]||(t[30]=(0,n.Lk)("label",{class:"lastN"},"Last Name",-1)),(0,n.bo)((0,n.Lk)("input",{class:"lastN-input","onUpdate:modelValue":t[7]||(t[7]=e=>o.form.lastname=e),type:"text"},null,512),[[s.Jo,o.form.lastname]]),t[31]||(t[31]=(0,n.Lk)("label",{class:"emailL"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{class:"email-input","onUpdate:modelValue":t[8]||(t[8]=e=>o.form.email=e),type:"email"},null,512),[[s.Jo,o.form.email]]),t[32]||(t[32]=(0,n.Lk)("label",{class:"phoneN"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{class:"phoneN-input","onUpdate:modelValue":t[9]||(t[9]=e=>o.form.phoneNumber=e),type:"text"},null,512),[[s.Jo,o.form.phoneNumber]]),t[33]||(t[33]=(0,n.Lk)("label",{class:"passwordL"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{class:"passwordL-input","onUpdate:modelValue":t[10]||(t[10]=e=>o.form.password=e),type:"password"},null,512),[[s.Jo,o.form.password]]),t[34]||(t[34]=(0,n.Lk)("label",{class:"roleL"},"Role",-1)),(0,n.bo)((0,n.Lk)("select",{class:"roleL-input","onUpdate:modelValue":t[11]||(t[11]=e=>o.form.role=e)},[t[22]||(t[22]=(0,n.Lk)("option",{disabled:"",value:""},"Select Role",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.roles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,$.v_)(e),9,Fa)))),128))],512),[[s.u1,o.form.role]]),t[35]||(t[35]=(0,n.Lk)("label",{class:"privi"},"Privileges",-1)),(0,n.Lk)("div",null,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi1",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>o.form.privileges=e),value:"Add members"},null,512),[[s.lH,o.form.privileges]]),t[23]||(t[23]=(0,n.Lk)("span",{class:"privi1-text"},"Add Members",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi2",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=e=>o.form.privileges=e),value:"Take Attendance"},null,512),[[s.lH,o.form.privileges]]),t[24]||(t[24]=(0,n.Lk)("span",{class:"privi2-text"},"Take Attendance",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi3",type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=e=>o.form.privileges=e),value:"Create Users"},null,512),[[s.lH,o.form.privileges]]),t[25]||(t[25]=(0,n.Lk)("span",{class:"privi3-text"},"Create Users",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi4",type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>o.form.privileges=e),value:"Get Attendance Overview"},null,512),[[s.lH,o.form.privileges]]),t[26]||(t[26]=(0,n.Lk)("span",{class:"privi4-text"},"Get Attendance Overview",-1))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{class:"privi5",type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>o.form.privileges=e),value:"Get Member Details"},null,512),[[s.lH,o.form.privileges]]),t[27]||(t[27]=(0,n.Lk)("span",{class:"privi5-text"},"Get Member Details",-1))])]),(0,n.Lk)("button",{class:"updateb",onClick:t[17]||(t[17]=(...e)=>i.updateUserDetails&&i.updateUserDetails(...e))},"Save Changes"),(0,n.Lk)("button",{class:"cancelb",onClick:t[18]||(t[18]=e=>o.showEditModal=!1)},"Cancel")])],32)):(0,n.Q3)("",!0)])])}var Ra={components:{UserSidebar:dt,AdminSidebar:q,Navbar:R},data(){return{loading:!1,showEditModal:!1,user_id:"",memberList:[],roles:["ADMIN","DATA CLERK","ADMINISTRATOR"],form:{firstname:"",lastname:"",email:"",phoneNumber:"",password:"",confirmPassword:"",role:"",privileges:[]}}},methods:{async fetchSummaryData(){this.loading=!0;try{const e=await C.A.get("https://churchmsbackend.onrender.com/attendance/get_attendance_for_the_current_day");this.totalAttendance=e.data.total_attendance,this.totalPresent=e.data.present_attendance,this.totalAbsent=e.data.absent_attendance}catch(e){console.error("Error fetching summary data:",e)}finally{this.loading=!1}},async getMembers(){this.loading=!0;try{const e=await C.A.get("htthttps://churchmsbackend.onrender.com/members/get_all_members");console.info("member list",e.data),"No user data exists"!==e.data?this.memberList=e.data.map((e=>({name:e.firstname+" "+e.lastname,phoneNumber:e.phoneNumber,memberStatus:e.memberStatus,member_id:e.id}))):(this.attendanceList=e.data,this.memberList=[])}catch(e){console.error("Error fetching user list:",e)}finally{this.loading=!1}},async editUser(e){this.loading=!0,console.error("getting details to update");try{const t=await C.A.get(`https://churchmsbackend.onrender.com/auth/get_user_by_id/${e.user_id}`);if(console.info("user data",t.data),t.data){const e=t.data;this.form={firstname:e.firstname||"",lastname:e.lastname||"",email:e.email||"",phoneNumber:e.phoneNumber||"",password:e.password||"",role:e.role||"",privileges:e.privileges?e.privileges.split(","):[]},this.maskedPassword="*****",this.user_id=e.id,this.showEditModal=!0}else alert("Error getting user data")}catch(t){console.error("Error fetching user data:",t)}finally{this.loading=!1}},isFormValid(){return this.form.firstname&&this.form.lastname&&this.form.email&&this.form.phoneNumber&&this.form.password&&this.form.confirmPassword&&this.form.role&&this.form.privileges},async updateUserDetails(){if(this.loading=!0,this.isFormValid){console.info("in the registeration function");const t={firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,phoneNumber:this.form.phoneNumber,password:this.form.password,role:this.form.role,privileges:this.form.privileges};console.log("Form is valid. Proceeding with user update...",t);try{const e=await C.A.patch(`https://churchmsbackend.onrender.com/auth/update_individual_user_fields/${this.user_id}`,{firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,phoneNumber:this.form.phoneNumber,password:this.form.password,role:this.form.role,privileges:this.form.privileges});console.info(e),e.data?(alert("User updated successfully"),this.showEditModal=!0):(console.info("error response for registeration ",e),alert("User details update failed"))}catch(e){console.error("Registeration error:",e),alert("An error occurred during registeration. Please try again.")}finally{this.loading=!1}}else console.log("Form is invalid"),alert("Form is invalid. Please try again.")},async deleteUser(e){this.loading=!0,console.info("this is the current record: ",e);try{console.info("user_id: ",e.user_id);const t=window.confirm(`Are you sure you want to delete the user with the name "${e.email}"?`);if(t){const t=await C.A.delete(`https://churchmsbackend.onrender.com/auth/delete_user_by_id/${e.user_id}`);console.info(" delete response ",t),"User not found"!==t.data?(this.memberList=this.memberList.filter((t=>t.user_id!==e.user_id)),alert("User deleted successfully.")):alert("User with name {} not found.")}else console.info("User deletion cancelled.")}catch(t){console.error("Error deleting user",t)}finally{this.loading=!1}},async checkName(){console.info("About to check name"),this.loading=!0;try{const e=await C.A.get(`https://churchmsbackend.onrender.com/members/get_member_by_words/${this.name}`);console.info(e),"Members with the given names do not exist"!==e.data.detail?(console.info("Member found"),e.data.length>0&&(console.info("Appending members"),this.memberList=[],this.memberList=e.data.map((e=>({name:e.firstname+" "+e.lastname,phoneNumber:e.phoneNumber,memberStatus:e.memberStatus,member_id:e.id}))),this.name="")):alert(e.data.detail)}catch(e){console.error("Member search error:",e),alert("An error occurred during member search processing. Please try again.")}finally{this.loading=!1}}},async downloadMembers(){console.info("In the download attendance function");try{const e=await C.A.get("http://localhost:5000/members/download_member_data",{responseType:"blob"});console.info("Response:",e);const t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});console.info("File response converted:",t);const a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a;const n=e.headers["content-disposition"];let l="attendance_data.xlsx";if(n){const e=n.match(/filename="(.+)"/);e&&e[1]&&(l=e[1])}s.download=l,document.body.appendChild(s),s.click(),document.body.removeChild(s),console.info("File is downloaded"),window.URL.revokeObjectURL(a)}catch(e){console.error("Error downloading the file:",e)}},mounted(){this.fetchSummaryData(),window.addEventListener("beforeunload",(()=>{localStorage.clear()}))}};const Ta=(0,r.A)(Ra,[["render",Ba],["__scopeId","data-v-2af545ba"]]);var Xa=Ta;const Oa=[{path:"/",component:v},{path:"/login",component:U},{path:"/adminDashboard",component:Le},{path:"/register",component:Re},{path:"/editUser",component:je},{path:"/adminOverView",component:ke},{path:"/adminMemberActionPage",component:Na},{path:"/editMemberPage",component:Xa},{path:"/home",component:vt},{path:"/attendance",component:Et},{path:"/attendanceOverview",component:Xt},{path:"/members",component:ha}],Ja=(0,m.aE)({history:(0,m.LA)(),routes:Oa});var Ga=Ja;(0,s.Ef)(c).use(Ga).mount("#app")},1131:function(e,t,a){e.exports=a.p+"img/hp1.54eaf885.png"},9840:function(e,t,a){e.exports=a.p+"img/hp2.2a5bfbda.png"},4978:function(e,t,a){e.exports=a.p+"img/hp3.972e484f.webp"}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,l){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],l=e[c][2];for(var i=!0,r=0;r<s.length;r++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(i=!1,l<o&&(o=l));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[s,n,l]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,l,o=s[0],i=s[1],r=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(r)var c=r(a)}for(t&&t(s);d<o.length;d++)l=o[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},s=self["webpackChunkchurchapp"]=self["webpackChunkchurchapp"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(4552)}));s=a.O(s)})();
//# sourceMappingURL=app.09840b5e.js.map